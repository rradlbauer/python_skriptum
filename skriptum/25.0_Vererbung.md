# 25.0 Vererbung

Es gibt Fälle, in denen man zu einer existierenden Klasse
etwas hinzufügen möchte,
aber die existierende Klasse nicht ändern kann oder will.

Als Beispiel soll hier die Klasse `Untersuchung` dienen,
in welcher eine Untersuchung eines Patienten
gespeichert wird:

![Untersuchung](../img/25.0/untersuchung.png)

```python
from datetime import datetime

class Untersuchung:
    def __init__(self, zeitpunkt : datetime, patient : str, arzt : str):
        self.zeitpunkt = zeitpunkt
        self.patient = patient
        self.arzt = arzt
```

Für jede Untersuchung werden der Zeitpunkt der Untersuchung,
der Name des Patienten und der Name des Arztes gespeichert.

Wenn wir nun genauer spezifizieren möchten,
dass es sich bei einer Untersuchung um eine Röntgenuntersuchung handelt,
könnten wir der Klasse `Untersuchung` noch weitere Attribute hinzufügen,
z.B.: `kontrastmittel`, `anzahl_bilder`, `dosis`, `bereich`.

Wir wollen aber die Klasse `Untersuchung` nicht ändern,
da es vielleicht noch andere Arten von Untersuchungen gibt,
welche diese Attribute nicht benötigen (z.B. eine Laboruntersuchung).

Alternativ könnten wir eine neue Klasse `Röntgenuntersuchung` erstellen,
welche wie die Klasse `Untersuchung` aufgebaut ist,
aber zusätzlich die Attribute `kontrastmittel`, 
`anzahl_bilder`, `dosis` und `bereich` enthält:

![RoentgenUntersuchung](../img/25.0/roentgen_untersuchung.png)

```python
from datetime import datetime

class Roentgenuntersuchung:
    def __init__(self, zeitpunkt : datetime, patient : str, arzt : str,
                 kontrastmittel : bool, anzahl_bilder : int, dosis : float, bereich : str):
        self.zeitpunkt = zeitpunkt
        self.patient = patient
        self.arzt = arzt
        self.kontrastmittel = kontrastmittel
        self.anzahl_bilder = anzahl_bilder
        self.dosis = dosis
        self.bereich = bereich
```

An dieser Lösung ist nicht optimal,
ist, dass wir den Code der Klasse `Untersuchung` duplizieren.
Das ist nicht nur unnötig,
sondern kann auch zu Problemen führen,
wenn wir die Klasse `Untersuchung` später ändern wollen,
indem wir beispielsweise für Patient und Arzt
jeweils eine eigene Klasse erstellen,
welche dann in der Klasse `Untersuchung` 
anstatt der Namen verwendet wird.

Diese Änderung müsste dann auch in der Klasse `Roentgenuntersuchung`
und vielleicht auch noch anderen Untersuchnungs-Klassen wie
beispielsweise `Laboruntersuchung` vorgenommen werden.

Um dieses Problem zu lösen, verwenden wir **Vererbung**:

Die Klasse `Roentgenuntersuchung` kann von der Klasse `Untersuchung` erben.
Das bedeutet, dass die Klasse `Roentgenuntersuchung`
alle Attribute und Methoden der Klasse `Untersuchung` übernimmt
und zusätzlich noch eigene Attribute und Methoden hinzufügen kann.

![Vererbung](../img/25.0/vererbung.png)

```python
class Roentgenuntersuchung(Untersuchung):
    def __init__(self, zeitpunkt : datetime, patient : str, arzt : str,
                 kontrastmittel : bool, anzahl_bilder : int, dosis : float, bereich : str):
        super().__init__(zeitpunkt, patient, arzt)  # ruft den Konstruktor der Basisklasse auf
        self.kontrastmittel = kontrastmittel
        self.anzahl_bilder = anzahl_bilder
        self.dosis = dosis
        self.bereich = bereich
```

Die Syntax `class Roentgenuntersuchung(Untersuchung):` bedeutet,
dass die Klasse `Roentgenuntersuchung` von der Klasse `Untersuchung` erbt.
`Roentgenuntersuchung` hat also die Attribute
`zeitpunkt`, `patient` und `arzt` von der Klasse `Untersuchung`
und zusätzlich die Attribute 
`kontrastmittel`, `anzahl_bilder`, `dosis` und `bereich`.

Die Methode `super().__init__(...)` 
ruft zuerst den Konstruktor der Basisklasse `Untersuchung` auf,
um die Attribute `zeitpunkt`, `patient` und `arzt` zu initialisieren.
Danach werden die zusätzlichen Attribute der Klasse `Roentgenuntersuchung`
initialisiert (`kontrastmittel`, `anzahl_bilder`, `dosis` und `bereich`).

Wenn wir nun noch eine Klasse `Laboruntersuchung` erstellen wollen,
können wir das tun, indem sie ebenfalls von der Klasse `Untersuchung` erbt:

![Laboruntersuchung](../img/25.0/labor_untersuchung.png)

```python
class Laboruntersuchung(Untersuchung):
    def __init__(self, zeitpunkt : datetime, patient : str, arzt : str,
                 art : str, nuechtern : bool):
        super().__init__(zeitpunkt, patient, arzt)
        self.art = art
        self.nuechtern = nuechtern
```

Wir haben nun 2 Klassen, welche von `Untersuchung` erben.
Sie haben die Attribute gemeinsam, welche für alle Untersuchungen gelten,
und zusätzlich noch eigene Attribute, 
welche nur für die jeweilige spezielle Untersuchung relevant sind.

Wenn wir später z.B. ändern wollen, dass vom Patienten auch
Sozialversicherungsnummer und Geburtsdatum 
gespeichert werden, können wir das folgendermaßen durchführen:

![Vererbung komplett](../img/25.0/vererbung_komplett.png)

```python
class Patient:
    def __init__(self, name: str, svnr: str, geburt: date):
        self.svnr = svnr
        self.name = name
        self.geburtsdatum = geburt
        
class Untersuchung:
    def __init__(self, zeitpunkt: datetime, patient: Patient, arzt: str):
        self.zeitpunkt = zeitpunkt
        self.patient = patient
        self.arzt = arzt
```

Anstatt nur den Namen des Patienten zu speichern,
speichern wir nun für jeder Untersuchung
eine Referenz auf eine Instanz der Klasse `Patient`.

An den Klassen `Roentgenuntersuchung` und `Laboruntersuchung`
müssen wir nur den Typ von Patient in der Parameterliste
des Konstruktors ändern, falls wir Type Hints verwenden.


## Übungen
[Hier geht's zu den Übungen](../uebungen/UE_25.0_Vererbung.md)

## Zusammenfassung

### Wichtige Begriffe


### Das sollst du können


[<<](24.0_Referenzen.md) &emsp; [>>](#)